<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="diya.css" />
    <title>C4GT Inaugration</title>
    <style>
      @font-face {
        font-family: "Samaan";
        src: url("./SAMAN___.TTF");
      }
    </style>
  </head>
  <body>
      <h1
        id="updateEventCreateDiv"
        style="font-family: 'Samaan'"
        class="eventHeading"
      >
        C4GT Inauguration
      </h1>
      <div class="inaugrationscreen" id="inaugrationscreen">
    
    <br />
    <div class="maindivcont">
    <div class="eventdivleft ">
           
      <div class="eventcard1 hidden" id="create"> <div class="eventCreate" ><pre id="eventCreate"></pre></div>
    </div>
   
      <div class="eventcard2 hidden" id="witness"> <div class="eventWitness" ><pre id="eventWitness"></pre></div>
    </div>
   
      <div class="eventcard1 hidden" id="complete"> <div class="eventWitnessComplete"><pre id="eventWitnessComplete"></pre></div>
    </div>
  </div>
  <div class="eventdivright">
  <div class="card4"><div id="summary"></div></div>
    <div class="diyas-container">

 
      <div class="container2">
        <div class="background hidden" id="stars1">
          <div class="star star--1"></div>
          <div class="star star--2"></div>
          <div class="star star--3"></div>
        </div>
        <div class="diya2">
          <div class="diya__base base">
            <div class="base__part base__part--bottom">
              <div class="base__decoration base__decoration--left"></div>
              <div class="base__decoration base__decoration--right"></div>
            </div>
            <div class="base__part base__part--top"></div>
          </div>
          <div class="diya__flame flame hidden" id="flame1">
            <div class="flame__shadow flame__shadow--big"></div>
            <div class="flame__shadow flame__shadow--sm1"></div>
            <div class="flame__shadow flame__shadow--sm2"></div>
            <div class="flame__shadow flame__shadow--sm3"></div>
            <div class="flame__fire flame__fire--outer2"></div>
            <div class="flame__fire flame__fire--inner2"></div>
          </div>
          <div class="diya__shadow shadow">
            <div class="shadow__flame"></div>
            <div class="shadow__diya"></div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="background hidden" id="stars2">
          <div class="star star--1"></div>
          <div class="star star--2"></div>
          <div class="star star--3"></div>
        </div>
        <div class="diya">
          <div class="diya__base base">
            <div class="base__part base__part--bottom">
              <div class="base__decoration base__decoration--left"></div>
              <div class="base__decoration base__decoration--right"></div>
            </div>
            <div class="base__part base__part--top"></div>
          </div>
          <div class="diya__flame flame hidden"  id="flame2">
            <div class="flame__shadow flame__shadow--big"></div>
            <div class="flame__shadow flame__shadow--sm1"></div>
            <div class="flame__shadow flame__shadow--sm2"></div>
            <div class="flame__shadow flame__shadow--sm3"></div>
            <div class="flame__fire flame__fire--outer"></div>
            <div class="flame__fire flame__fire--inner"></div>
          </div>
          <div class="diya__shadow shadow">
            <div class="shadow__flame"></div>
            <div class="shadow__diya"></div>
          </div>
        </div>
      </div>
      <div class="container2">
        <div class="background hidden" id="stars3">
          <div class="star star--1"></div>
          <div class="star star--2"></div>
          <div class="star star--3"></div>
        </div>
        <div class="diya2">
          <div class="diya__base base">
            <div class="base__part base__part--bottom">
              <div class="base__decoration base__decoration--left"></div>
              <div class="base__decoration base__decoration--right"></div>
            </div>
            <div class="base__part base__part--top"></div>
          </div>
          <div class="diya__flame flame hidden" id="flame3">
            <div class="flame__shadow flame__shadow--big"></div>
            <div class="flame__shadow flame__shadow--sm1"></div>
            <div class="flame__shadow flame__shadow--sm2"></div>
            <div class="flame__shadow flame__shadow--sm3"></div>
            <div class="flame__fire flame__fire--outer2"></div>
            <div class="flame__fire flame__fire--inner2"></div>
          </div>
          <div class="diya__shadow shadow">
            <div class="shadow__flame"></div>
            <div class="shadow__diya"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="messagesdiv">
      <div class="message" id="message1">
      </div>
      <div class="message" id="message2">
      </div>
      <div class="message"  id="message3">
      </div>
     </div>
  </div>
  </div>

    </div>
    <div class="completedscreen hide" id="completedscreen">
      <div class="leftdivlampmsg">
      <div class="diyas-container-complete">
        <div class="container2">
          <div class="diyacomplete">
            <div class="diya__base base">
              <div class="base__part base__part--bottom">
                <div class="base__decoration base__decoration--left"></div>
                <div class="base__decoration base__decoration--right"></div>
              </div>
              <div class="base__part base__part--top"></div>
            </div>
            <div class="diya__flame flame">
              <div class="flame__shadow flame__shadow--big"></div>
              <div class="flame__shadow flame__shadow--sm1"></div>
              <div class="flame__shadow flame__shadow--sm2"></div>
              <div class="flame__shadow flame__shadow--sm3"></div>
              <div class="flame__fire flame__fire--outer2"></div>
              <div class="flame__fire flame__fire--inner2"></div>
            </div>
            <div class="diya__shadow shadow">
              <div class="shadow__flame"></div>
              <div class="shadow__diya"></div>
            </div>
          </div>
        </div>
        <div class="containerlo containermiddle">
          <div class="diyacomplete">
            <div class="diya__base base">
              <div class="base__part base__part--bottom">
                <div class="base__decoration base__decoration--left"></div>
                <div class="base__decoration base__decoration--right"></div>
              </div>
              <div class="base__part base__part--top"></div>
            </div>
            <div class="diya__flame flame" >
              <div class="flame__shadow flame__shadow--big"></div>
              <div class="flame__shadow flame__shadow--sm1"></div>
              <div class="flame__shadow flame__shadow--sm2"></div>
              <div class="flame__shadow flame__shadow--sm3"></div>
              <div class="flame__fire flame__fire--outer"></div>
              <div class="flame__fire flame__fire--inner"></div>
            </div>
            <div class="diya__shadow shadow">
              <div class="shadow__flame"></div>
              <div class="shadow__diya"></div>
            </div>
          </div>
        </div>
        <div class="container2">
          <div class="diyacomplete">
            <div class="diya__base base">
              <div class="base__part base__part--bottom">
                <div class="base__decoration base__decoration--left"></div>
                <div class="base__decoration base__decoration--right"></div>
              </div>
              <div class="base__part base__part--top"></div>
            </div>
            <div class="diya__flame flame" >
              <div class="flame__shadow flame__shadow--big"></div>
              <div class="flame__shadow flame__shadow--sm1"></div>
              <div class="flame__shadow flame__shadow--sm2"></div>
              <div class="flame__shadow flame__shadow--sm3"></div>
              <div class="flame__fire flame__fire--outer2"></div>
              <div class="flame__fire flame__fire--inner2"></div>
            </div>
            <div class="diya__shadow shadow">
              <div class="shadow__flame"></div>
              <div class="shadow__diya"></div>
            </div>
          </div>
        </div>
      </div>

   
     <div class="messagesdiv">
     <div class="message">
      <span class="quote">“</span> A character can be any letter, number, punctuation, special character, or space. Each of these characters takes up one byte of space in a computer’s memory.
     </div>
     <div class="message">
      <span class="quote">“</span> A character can be any letter, number, punctuation, special character, or space. Each of these characters takes up one byte of space in a computer’s memory.
     </div>
     <div class="message">
      <span class="quote">“</span> A character can be any letter, number, punctuation, special character, or space. Each of these characters takes up one byte of space in a computer’s memory.
     </div>
    </div>
    </div>
    <div class="rightdiv">
      <div class="eventCreate">
        <div class="card"></div>
      </div>
      <div class="eventWitness">
        <div class="card"></div>
      </div>
      <div class="eventWitnessComplete">
        <div class="card"></div>
      </div>
    </div>
    </div>


    <script src="./bundle.js"></script>

    <script>
      // Wait for the DOM to be fully loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Ensure Browserify has loaded the modules
        const submitIdentifier = window.submitIdentifier
        const eventManager = window.eventManager
        const identifier  = "Final_Dmp_Test";
        submitIdentifier(identifier);
        (async () => {
                let previoussummary = await eventSummary(identifier);
              
                if(previoussummary !== 'null'){
                // Stringify the JSON object with indentation
                const formattedJson = JSON.stringify(JSON.parse(previoussummary), null, 4);
                // Update the HTML element with formatted JSON
                document.getElementById("summary").innerHTML =`<pre>${formattedJson}</pre>`;
              }
     
               const intervaldata  = setInterval(async () => {
                if(previoussummary !== 'null'){
                  console.log("herechecking",JSON.parse(previoussummary).currentWitnessCount);
                  if(previoussummary!=="null" && JSON.parse(previoussummary).currentWitnessCount === 3 ){
                    console.log("here");
                    toggleDiva1();
                    toggleDiva2();
                    toggleDiva3();
                    clearInterval(intervaldata);
                  }
                }
                    let currentsummary = await eventSummary(identifier);
                    if (currentsummary !== previoussummary) {
                      const formattedJson = JSON.stringify(JSON.parse(currentsummary), null,4);
                      document.getElementById("summary").innerHTML =`<pre>${formattedJson}</pre>`;
                        console.log('Inner text changed to:', currentsummary.currentWitnessCount);
                        previoussummary = currentsummary;
                    }
                }, 3000);
              
          })();
        eventManager();
        let previousText = document.getElementById('eventWitness').innerText;
        setInterval(() => {
            const currentText = document.getElementById('eventWitness').innerText;
            if (currentText !== previousText) {
                try{
                  const array = JSON.parse(currentText);

                  if(array.length === 1){
                    const message1 = document.getElementById("message1");
                    message1.innerHTML = `<span class="quote">“</span> ${array[0].comments}`
                    const divcreate = document.getElementById("create");
                    if (divcreate.classList.contains("hidden")) {
                      divcreate.classList.remove("hidden");
                    }
                    const divwiteness = document.getElementById("witness");
                    if (divwiteness.classList.contains("hidden")) {
                      divwiteness.classList.remove("hidden");
                    }
                    toggleDiva1();
                  } else if(array.length === 2){
                    const message1 = document.getElementById("message1");
                    message1.innerHTML = `<span class="quote">“</span> ${array[0].comments}`
                    if(array[1].comments!==""){
                    const message2 = document.getElementById("message2");
                    message2.innerHTML = `<span class="quote">“</span> ${array[1].comments}`
                    }
                    toggleDiva1();
                    toggleDiva2();
                  }
                }catch(e){
                }
                previousText = currentText;
                const currentTextcompletetext = document.getElementById('eventWitnessComplete').innerText;
                if(currentTextcompletetext!==null&& currentTextcompletetext!==''){
                  const currentTextwitness = document.getElementById('eventWitness').innerText;
                  const arraywitness = JSON.parse(currentTextwitness);
                  const divwiteness = document.getElementById("complete");
                    if (divwiteness.classList.contains("hidden")) {
                      divwiteness.classList.remove("hidden");
                    }
                    if(arraywitness[0].comments!=='' && arraywitness[0].comments){
                      const message1 = document.getElementById("message1");
                    message1.innerHTML = `<span class="quote">“</span> ${arraywitness[0].comments}`
                    }
                    if(arraywitness[1].comments!=='' && arraywitness[1].comments){
                      const message2 = document.getElementById("message2");
                    message2.innerHTML = `<span class="quote">“</span> ${arraywitness[1].comments}`
                    }
                    if(arraywitness[2].comments!=='' && arraywitness[2].comments){
                      const message3 = document.getElementById("message3");
                    message3.innerHTML = `<span class="quote">“</span> ${arraywitness[2].comments}`
                    }
                  toggleDiva1();
                  toggleDiva2();
                  toggleDiva3();
                }
      
            }
        }, 1000);
      })

    

    function toggleDiva1() {
    const div = document.getElementById("flame1");
    if (div.classList.contains("hidden")) {
        div.classList.remove("hidden");
        setTimeout(() => {
            div.style.opacity = "1";
        }, 500); // Delay setting opacity to ensure transition effect
    }
    const divstars = document.getElementById("stars1");
    if (divstars.classList.contains("hidden")) {
      divstars.classList.remove("hidden");
        setTimeout(() => {
          divstars.style.opacity = "1";
        }, 500); // Delay setting opacity to ensure transition effect
    }
    }

    function toggleDiva2() {
    const div = document.getElementById("flame2");
    if (div.classList.contains("hidden")) {
        div.classList.remove("hidden");
        setTimeout(() => {
            div.style.opacity = "1";
        }, 500); // Delay setting opacity to ensure transition effect
    }
    const divstars = document.getElementById("stars2");
    if (divstars.classList.contains("hidden")) {
      divstars.classList.remove("hidden");
        setTimeout(() => {
          divstars.style.opacity = "1";
        }, 500); // Delay setting opacity to ensure transition effect
    }
    }

    function toggleDiva3() {
    const div = document.getElementById("flame3");
    if (div.classList.contains("hidden")) {
        div.classList.remove("hidden");
        setTimeout(() => {
            div.style.opacity = "1";
        }, 500); // Delay setting opacity to ensure transition effect
    }
    const divstars = document.getElementById("stars3");
    if (divstars.classList.contains("hidden")) {
      divstars.classList.remove("hidden");
        setTimeout(() => {
          divstars.style.opacity = "1";
        }, 500); // Delay setting opacity to ensure transition effect
    }
    }
    </script>
  </body>
</html>
